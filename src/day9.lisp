(defpackage advent-of-code-2024/day9
  (:use :cl)
  (:import-from :advent-of-code-2024/utils #:swap-elements)
  (:export #:day9))

(in-package advent-of-code-2024/day9)

(defun create-diskmap (map)
  (let ((file-id 0)
        (l '()))
    (loop :for block :in map
          :for x :from 0 :to (length map)
          :if (evenp x)
            :do (progn
                  (push (generate-file-size-block block file-id) l)
                  (incf file-id))
          :else
            :do
                (push (generate-empty-size-block block) l))
    (let ((diskmap (coerce (format nil "窿蝈鲥蝮飑ъ轶舂┅磲脲狎蜥戾铉翳溟箅磲皓洪铋糸犰泔铘孱趔溟箅磲皓┅ㄤ彐躅祜徜溽翎ㄤ狒岍戾è溽翎祜镳烘矧洪ㄣ镥蜚篝蜷铉趄轫Ж＼五黛轭濠蹰镳候遽洵骈戾篝蜷铉溽翎┅ъ轶舂恒镬戾泗篝蜷铉愆┅ㄣ蝈狒瀛溟箅磲磲疸狎＇疳蝮瀛轭翦珏溽翎┅┅ㄤ彐躅珏铄蜥翦骈戾箝瀛忪镢铛骈戾殇ㄦ矧磲铋窿祜镳烘矧烘蝻呼ū铛愆恒镬戾泗黩轸瀛麸篝蜷铉骈戾殇┅┅ㄤ彐躅珏铄蜥翦屙痿箝瀛忪镢铛愆ㄦ矧磲铋窿祜镳烘矧烘蝻呼ū铛愆恒镬戾泗┅ㄤ彐躅骈钿骈蝮舡骝邋忪镢ㄤ轶腠狃痫箝糸镱＼溟箅磲皓ㄤ彐躅骈钿灬篝骈戾忪镢ㄤ轶腠狃祜镳烘矧烘蝻ū戾铉翳溟箅磲皓轰秣铘乎铘殪铒ㄥㄥ祠溟箅磲椹＼┅烘轭犰禊蝈趱蝾椹┅ㄤ彐躅溴骝徵ㄤ轶腠狃祜镳烘矧忪镢横泸矬溟箅磲烘矧泔躅烘蝻呼ō戾铉翳溟箅磲皓暴瑚桢ㄥ耢忪镢＼轰篦狃屐屙孱趔溟箅磲泔躅ㄦ轭洵灬篝骈戾忪镢溟箅磲皓┅篦狃屐屙孱趔溟箅磲ㄦ轭洵骈蝮舡骝邋忪镢溟箅磲皓ㄦ轭洵灬篝骈戾忪镢溟箅磲皓┅ㄤ彐躅汜煦蹯狒瀛汨邈塍蹴ㄤ轶腠狃戾è溽翎祜镳烘矧铛横泸矬蝈盹鲥＼溟箅磲皓恒镬戾泗疳蝮瀛轭翦珏篝蜷铉铛愆┅┅祜镳烘矧铛洪溽翎烘矧泔躅烘蝻呼ū戾铉翳溽翎┅后蹴í铛泔躅舂┅ㄤ彐躅疳螋ㄤ轶腠狃戾è泔痖邃溟箅磲ㄣ镳箦溟箅磲皓┅ㄤ彐蜥泔痖邃溟箅磲皓ㄣ犰沲灬翦汨邈塍蹴泔痖邃溟箅磲皓┅ㄤ彐躅疳螋ㄤ狒岍铋飑ㄤ彐躅溽疳翳戾è溽翎祜徜溽翎疳翳┅扉篝疳螋溽翎疳螋溽翎┅┅换涝夏虾澡轶黠螂骘殇戾篌翳犷卑怩铄邃麸忮屮翦钿邃麸篚痧矧祜铉弪骈戾殇戾è溽翎祜徜溽翎ｐ聃殂腱轶鸠祜汜飙痱镪邈趔犸悱舶泊溽翎溽弓溴盹溽翎豇簪┅惫哺疳螋溽翎┅换戾è溽翎祜徜溽翎ｐ聃殂腱轶鸠祜汜飙痱镪邈趔犸悱舶泊溽翎溽弓溽翎豇簪┅换ㄦ矧磲窿ア溽翎┅换ㄦ矧磲窿アㄤ彐蜥溽翎┅